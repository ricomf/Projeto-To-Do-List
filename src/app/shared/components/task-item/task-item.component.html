<ion-item-sliding *ngIf="showActions; else simpleItem">
  <ion-item [class.completed]="isCompleted" (click)="onClick()" button>
    <ion-button
      slot="start"
      fill="clear"
      [color]="getStatusColor()"
      (click)="onStatusClick($event)"
      class="status-button"
    >
      <ion-icon slot="icon-only" [name]="getStatusIcon()"></ion-icon>
    </ion-button>

    <ion-label class="ion-text-wrap">
      <h2 [class.task-completed]="isCompleted">{{ task.titulo }}</h2>
      <p *ngIf="task.descricao">{{ task.descricao }}</p>
      <div class="task-meta">
        <ion-chip [color]="getPriorityColor(task.prioridade)">
          <ion-label>{{ getPriorityLabel(task.prioridade) }}</ion-label>
        </ion-chip>
        <ion-badge *ngIf="task.dataVencimento" color="medium">
          {{ formatDate(task.dataVencimento) }}
        </ion-badge>
        <ion-badge *ngFor="let tag of task.tags" color="tertiary">
          {{ tag }}
        </ion-badge>
      </div>
    </ion-label>
  </ion-item>

  <ion-item-options side="end">
    <ion-item-option color="primary" (click)="onEdit()">
      <ion-icon name="create" slot="icon-only"></ion-icon>
    </ion-item-option>
    <ion-item-option color="danger" (click)="onDelete()">
      <ion-icon name="trash" slot="icon-only"></ion-icon>
    </ion-item-option>
  </ion-item-options>
</ion-item-sliding>

<ng-template #simpleItem>
  <ion-item [class.completed]="isCompleted" (click)="onClick()" button>
    <ion-button
      slot="start"
      fill="clear"
      [color]="getStatusColor()"
      (click)="onStatusClick($event)"
      class="status-button"
    >
      <ion-icon slot="icon-only" [name]="getStatusIcon()"></ion-icon>
    </ion-button>

    <ion-label class="ion-text-wrap">
      <h2 [class.task-completed]="isCompleted">{{ task.titulo }}</h2>
      <p *ngIf="task.descricao">{{ task.descricao }}</p>
      <div class="task-meta">
        <ion-chip [color]="getPriorityColor(task.prioridade)">
          <ion-label>{{ getPriorityLabel(task.prioridade) }}</ion-label>
        </ion-chip>
        <ion-badge *ngIf="task.dataVencimento" color="medium">
          {{ formatDate(task.dataVencimento) }}
        </ion-badge>
        <ion-badge *ngFor="let tag of task.tags" color="tertiary">
          {{ tag }}
        </ion-badge>
      </div>
    </ion-label>
  </ion-item>
</ng-template>
