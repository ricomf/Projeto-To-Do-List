import{c as It,d as vt}from"./chunk-NYAYANX7.js";import{A as Pt,O as Ot,S as Mt,X as N,Z as St,a as R,b as ht,c as Ct,j as xt,l as bt,s as F,w as Tt}from"./chunk-DC72OUVS.js";import{d as l,e as C,x as ft}from"./chunk-W6BZYZPR.js";import"./chunk-NRZIFRM7.js";import{$ as S,A as O,Bb as X,C as y,Cb as Z,F as f,Fa as j,G as P,Ib as $,J as m,K as a,Ka as Et,Kb as tt,L as s,M as h,Mb as et,Nb as nt,Pb as it,Q as M,Qa as Y,Qb as ot,R as k,Rb as at,S as g,Sb as st,Ta as q,Tb as rt,Ub as L,Vb as ct,Z as W,Zb as lt,_b as mt,aa as p,ab as J,ac as gt,ba as T,ca as I,cb as K,ea as A,fa as z,fc as pt,ga as B,gc as dt,kc as _t,la as H,na as G,oc as V,pa as w,qa as E,qc as ut,r as _,rc as kt,s as u,ta as v,ua as D,uc as Q,z as o}from"./chunk-MUBZYPCN.js";import"./chunk-IUOEA5VS.js";import"./chunk-GG6GQ6ON.js";import"./chunk-HKEYXBPG.js";import"./chunk-65VMTP75.js";import"./chunk-DKYB3LAM.js";import"./chunk-WKMV7HP7.js";import"./chunk-2CQGC6XC.js";import"./chunk-MOTUYE2F.js";import"./chunk-7BGE4CD4.js";import"./chunk-Z3ZIDQ56.js";import"./chunk-TRVT55KM.js";import"./chunk-NLP2MHHW.js";import"./chunk-KFF2YPXM.js";import"./chunk-VX62UQSI.js";import"./chunk-5R267MUJ.js";import{f as U,h as x}from"./chunk-ECACSZ36.js";function Vt(i,c){if(i&1&&(a(0,"p"),p(1),s()),i&2){let t=g(2);o(),T(t.task.descricao)}}function Rt(i,c){if(i&1&&(a(0,"ion-badge",16),p(1),s()),i&2){let t=g(2);o(),I(" ",t.formatDate(t.task.dataVencimento)," ")}}function Ft(i,c){if(i&1&&(a(0,"ion-badge",17),p(1),s()),i&2){let t=c.$implicit;o(),I(" ",t," ")}}function Nt(i,c){if(i&1){let t=M();a(0,"ion-item-sliding")(1,"ion-item",2),k("click",function(){_(t);let n=g();return u(n.onClick())}),a(2,"ion-button",3),k("click",function(n){_(t);let r=g();return u(r.onStatusClick(n))}),h(3,"ion-icon",4),s(),a(4,"ion-label",5)(5,"h2"),p(6),s(),f(7,Vt,2,1,"p",6),a(8,"div",7)(9,"ion-chip",8)(10,"ion-label"),p(11),s()(),f(12,Rt,2,1,"ion-badge",9)(13,Ft,2,1,"ion-badge",10),s()()(),a(14,"ion-item-options",11)(15,"ion-item-option",12),k("click",function(){_(t);let n=g();return u(n.onEdit())}),h(16,"ion-icon",13),s(),a(17,"ion-item-option",14),k("click",function(){_(t);let n=g();return u(n.onDelete())}),h(18,"ion-icon",15),s()()()}if(i&2){let t=g();o(),S("completed",t.isCompleted),o(),m("color",t.getStatusColor()),o(),m("name",t.getStatusIcon()),o(2),S("task-completed",t.isCompleted),o(),T(t.task.titulo),o(),m("ngIf",t.task.descricao),o(2),m("color",t.getPriorityColor(t.task.prioridade)),o(2),T(t.getPriorityLabel(t.task.prioridade)),o(),m("ngIf",t.task.dataVencimento),o(),m("ngForOf",t.task.tags)}}function At(i,c){if(i&1&&(a(0,"p"),p(1),s()),i&2){let t=g(2);o(),T(t.task.descricao)}}function zt(i,c){if(i&1&&(a(0,"ion-badge",16),p(1),s()),i&2){let t=g(2);o(),I(" ",t.formatDate(t.task.dataVencimento)," ")}}function Bt(i,c){if(i&1&&(a(0,"ion-badge",17),p(1),s()),i&2){let t=c.$implicit;o(),I(" ",t," ")}}function Gt(i,c){if(i&1){let t=M();a(0,"ion-item",2),k("click",function(){_(t);let n=g();return u(n.onClick())}),a(1,"ion-button",3),k("click",function(n){_(t);let r=g();return u(r.onStatusClick(n))}),h(2,"ion-icon",4),s(),a(3,"ion-label",5)(4,"h2"),p(5),s(),f(6,At,2,1,"p",6),a(7,"div",7)(8,"ion-chip",8)(9,"ion-label"),p(10),s()(),f(11,zt,2,1,"ion-badge",9)(12,Bt,2,1,"ion-badge",10),s()()()}if(i&2){let t=g();S("completed",t.isCompleted),o(),m("color",t.getStatusColor()),o(),m("name",t.getStatusIcon()),o(2),S("task-completed",t.isCompleted),o(),T(t.task.titulo),o(),m("ngIf",t.task.descricao),o(2),m("color",t.getPriorityColor(t.task.prioridade)),o(2),T(t.getPriorityLabel(t.task.prioridade)),o(),m("ngIf",t.task.dataVencimento),o(),m("ngForOf",t.task.tags)}}var yt,wt=U(()=>{"use strict";G();D();Q();ht();St();ft();G();Q();D();yt=(()=>{let c=class c{constructor(e){this.actionSheetCtrl=e,this.showActions=!0,this.taskToggle=new P,this.taskStatusChange=new P,this.taskEdit=new P,this.taskDelete=new P,this.taskClick=new P,this.TaskStatus=l,R({create:F,trash:N,ellipseOutline:Tt,playCircleOutline:Ot,checkmarkCircleOutline:bt})}onToggle(){this.taskToggle.emit(this.task)}onStatusClick(e){return x(this,null,function*(){e.stopPropagation(),yield(yield this.actionSheetCtrl.create({header:"Alterar Status",buttons:[{text:"A Fazer",icon:"ellipse-outline",cssClass:this.task.status===l.TODO?"action-sheet-selected":"",handler:()=>{this.task.status!==l.TODO&&this.taskStatusChange.emit({task:this.task,newStatus:l.TODO})}},{text:"Em Andamento",icon:"play-circle-outline",cssClass:this.task.status===l.IN_PROGRESS?"action-sheet-selected":"",handler:()=>{this.task.status!==l.IN_PROGRESS&&this.taskStatusChange.emit({task:this.task,newStatus:l.IN_PROGRESS})}},{text:"Conclu\xEDdo",icon:"checkmark-circle-outline",cssClass:this.task.status===l.COMPLETED?"action-sheet-selected":"",handler:()=>{this.task.status!==l.COMPLETED&&this.taskStatusChange.emit({task:this.task,newStatus:l.COMPLETED})}},{text:"Cancelar",role:"cancel"}]})).present()})}getStatusIcon(){switch(this.task.status){case l.TODO:return"ellipse-outline";case l.IN_PROGRESS:return"play-circle-outline";case l.COMPLETED:return"checkmark-circle-outline";default:return"ellipse-outline"}}getStatusColor(){switch(this.task.status){case l.TODO:return"medium";case l.IN_PROGRESS:return"primary";case l.COMPLETED:return"success";default:return"medium"}}getStatusLabel(){switch(this.task.status){case l.TODO:return"A Fazer";case l.IN_PROGRESS:return"Em Andamento";case l.COMPLETED:return"Conclu\xEDdo";default:return"A Fazer"}}onEdit(){this.taskEdit.emit(this.task)}onDelete(){this.taskDelete.emit(this.task)}onClick(){this.taskClick.emit(this.task)}getPriorityColor(e){return{[C.LOW]:"success",[C.MEDIUM]:"warning",[C.HIGH]:"danger",[C.URGENT]:"danger"}[e]}getPriorityLabel(e){return{[C.LOW]:"Baixa",[C.MEDIUM]:"M\xE9dia",[C.HIGH]:"Alta",[C.URGENT]:"Urgente"}[e]}formatDate(e){return new Date(e).toLocaleDateString("pt-BR")}get isCompleted(){return this.task.status===l.COMPLETED}};c.\u0275fac=function(n){return new(n||c)(O(_t))},c.\u0275cmp=y({type:c,selectors:[["app-task-item"]],inputs:{task:"task",showActions:"showActions"},outputs:{taskToggle:"taskToggle",taskStatusChange:"taskStatusChange",taskEdit:"taskEdit",taskDelete:"taskDelete",taskClick:"taskClick"},decls:3,vars:2,consts:[["simpleItem",""],[4,"ngIf","ngIfElse"],["button","",3,"click"],["slot","start","fill","clear",1,"status-button",3,"click","color"],["slot","icon-only",3,"name"],[1,"ion-text-wrap"],[4,"ngIf"],[1,"task-meta"],[3,"color"],["color","medium",4,"ngIf"],["color","tertiary",4,"ngFor","ngForOf"],["side","end"],["color","primary",3,"click"],["name","create","slot","icon-only"],["color","danger",3,"click"],["name","trash","slot","icon-only"],["color","medium"],["color","tertiary"]],template:function(n,r){if(n&1&&f(0,Nt,19,12,"ion-item-sliding",1)(1,Gt,13,12,"ng-template",null,0,H),n&2){let b=W(2);m("ngIf",r.showActions)("ngIfElse",b)}},dependencies:[v,w,E,ot,L,$,X,V,rt,st,at,Z],styles:["ion-item[_ngcontent-%COMP%]{--padding-start: 16px}ion-item.completed[_ngcontent-%COMP%]{opacity:.6}.task-completed[_ngcontent-%COMP%]{text-decoration:line-through;color:var(--ion-color-medium)}.task-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;align-items:center}.task-meta[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{height:24px;margin:0}.task-meta[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px}.task-meta[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:11px;padding:4px 8px}.status-button[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;margin:0 8px 0 0}.status-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px}"]});let i=c;return i})()});function Qt(i,c){if(i&1){let t=M();a(0,"app-task-item",16),k("taskToggle",function(n){_(t);let r=g(2);return u(r.toggleTaskStatus(n))})("taskStatusChange",function(n){_(t);let r=g(2);return u(r.handleStatusChange(n))})("taskEdit",function(n){_(t);let r=g(2);return u(r.editTask(n))})("taskDelete",function(n){_(t);let r=g(2);return u(r.deleteTask(n))})("taskClick",function(n){_(t);let r=g(2);return u(r.viewTaskDetails(n))}),s()}if(i&2){let t=c.$implicit;m("task",t)("showActions",!0)}}function Ut(i,c){if(i&1&&(a(0,"ion-list"),f(1,Qt,1,2,"app-task-item",15),s()),i&2){let t=g();o(),m("ngForOf",t.filteredTasks)}}function Wt(i,c){i&1&&(a(0,"p"),p(1,"Tente buscar por outro termo"),s())}function Ht(i,c){i&1&&(a(0,"p"),p(1,"Comece criando sua primeira tarefa!"),s())}function jt(i,c){if(i&1&&(a(0,"div",17),h(1,"ion-icon",18),a(2,"h2"),p(3,"Nenhuma tarefa encontrada"),s(),f(4,Wt,2,0,"p",10)(5,Ht,2,0,"p",10),s()),i&2){let t=g();o(4),m("ngIf",t.searchQuery),o(),m("ngIf",!t.searchQuery)}}var he,Yt=U(()=>{D();K();Q();ht();St();ft();wt();G();vt();Et();D();K();he=(()=>{let c=class c{constructor(e,n){this.taskService=e,this.router=n,this.tasks=[],this.filteredTasks=[],this.selectedSegment="all",this.searchQuery="",this.isLoading=!1,console.log("[TasksPage] Constructor called"),R({add:Ct,search:Mt,filter:Pt,checkmark:xt,trash:N,create:F})}ngOnInit(){console.log("[TasksPage] ngOnInit called"),this.loadTasks(),this.subscribeToTaskUpdates()}subscribeToTaskUpdates(){this.taskService.tasks$.subscribe(e=>{console.log("[TasksPage] Tasks updated via subscription:",e.length),this.tasks=e,this.applyFilters()})}loadTasks(){return x(this,null,function*(){this.isLoading=!0;try{this.tasks=yield this.taskService.getTasks(),this.applyFilters()}catch(e){console.error("Error loading tasks:",e)}finally{this.isLoading=!1}})}handleRefresh(e){return x(this,null,function*(){yield this.loadTasks(),e.target.complete()})}onSegmentChange(e){this.selectedSegment=e.detail.value,this.applyFilters()}onSearchChange(e){this.searchQuery=e.detail.value?.toLowerCase()||"",this.applyFilters()}applyFilters(){let e=[...this.tasks];if(this.selectedSegment!=="all"){let n={todo:l.TODO,inprogress:l.IN_PROGRESS,completed:l.COMPLETED};e=e.filter(r=>r.status===n[this.selectedSegment])}this.searchQuery&&(e=e.filter(n=>n.titulo.toLowerCase().includes(this.searchQuery)||n.descricao?.toLowerCase().includes(this.searchQuery))),this.filteredTasks=e}toggleTaskStatus(e){return x(this,null,function*(){try{console.log("[TasksPage] Toggling task status:",e.id,"current status:",e.status);let n=e.status===l.COMPLETED?l.TODO:l.COMPLETED;console.log("[TasksPage] New status will be:",n),yield this.taskService.updateTask(e.id,{status:n}),console.log("[TasksPage] Task updated - UI will update automatically via subscription")}catch(n){console.error("[TasksPage] Error updating task:",n)}})}handleStatusChange(e){return x(this,null,function*(){try{console.log("[TasksPage] Changing task status:",e.task.id,"to:",e.newStatus),yield this.taskService.updateTask(e.task.id,{status:e.newStatus}),console.log("[TasksPage] Task status updated - UI will update automatically via subscription")}catch(n){console.error("[TasksPage] Error updating task status:",n)}})}deleteTask(e){return x(this,null,function*(){try{yield this.taskService.deleteTask(e.id)}catch(n){console.error("Error deleting task:",n)}})}editTask(e){this.router.navigate(["/task-form",e.id])}createNewTask(){this.router.navigate(["/task-form"])}viewTaskDetails(e){this.router.navigate(["/task-detail",e.id])}};c.\u0275fac=function(n){return new(n||c)(O(It),O(j))},c.\u0275cmp=y({type:c,selectors:[["app-tasks"]],decls:28,vars:6,consts:[[3,"translucent"],["color","primary"],["placeholder","Buscar tarefas...","debounce","300",3,"ngModelChange","ionInput","ngModel"],[3,"ngModelChange","ionChange","ngModel"],["value","all"],["value","todo"],["value","inprogress"],["value","completed"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],["class","empty-state",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["id","add-task-btn",3,"click"],["name","add"],[3,"task","showActions","taskToggle","taskStatusChange","taskEdit","taskDelete","taskClick",4,"ngFor","ngForOf"],[3,"taskToggle","taskStatusChange","taskEdit","taskDelete","taskClick","task","showActions"],[1,"empty-state"],["name","checkmark-circle-outline"]],template:function(n,r){n&1&&(a(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),p(3,"Minhas Tarefas"),s()(),a(4,"ion-toolbar")(5,"ion-searchbar",2),B("ngModelChange",function(d){return z(r.searchQuery,d)||(r.searchQuery=d),d}),k("ionInput",function(d){return r.onSearchChange(d)}),s()(),a(6,"ion-toolbar")(7,"ion-segment",3),B("ngModelChange",function(d){return z(r.selectedSegment,d)||(r.selectedSegment=d),d}),k("ionChange",function(d){return r.onSegmentChange(d)}),a(8,"ion-segment-button",4)(9,"ion-label"),p(10,"Todas"),s()(),a(11,"ion-segment-button",5)(12,"ion-label"),p(13,"A Fazer"),s()(),a(14,"ion-segment-button",6)(15,"ion-label"),p(16,"Em Andamento"),s()(),a(17,"ion-segment-button",7)(18,"ion-label"),p(19,"Conclu\xEDdas"),s()()()()(),a(20,"ion-content",8)(21,"ion-refresher",9),k("ionRefresh",function(d){return r.handleRefresh(d)}),h(22,"ion-refresher-content"),s(),f(23,Ut,2,1,"ion-list",10)(24,jt,6,2,"div",11),a(25,"ion-fab",12)(26,"ion-fab-button",13),k("click",function(){return r.createNewTask()}),h(27,"ion-icon",14),s()()()),n&2&&(m("translucent",!0),o(5),A("ngModel",r.searchQuery),o(2),A("ngModel",r.selectedSegment),o(13),m("fullscreen",!0),o(3),m("ngIf",r.filteredTasks.length>0),o(),m("ngIf",r.filteredTasks.length===0&&!r.isLoading))},dependencies:[v,w,E,J,Y,q,it,dt,pt,tt,et,nt,V,ct,kt,gt,ut,lt,mt,L,yt],styles:["ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);pointer-events:auto!important}ion-content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:auto!important}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: rgba(26, 26, 46, .95);--color: #ffffff;--border-color: rgba(255, 255, 255, .1)}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-weight:600}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: #ffffff}ion-header[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .08);--border-radius: 12px;--box-shadow: none;--color: #ffffff;--placeholder-color: rgba(255, 255, 255, .5);--icon-color: rgba(255, 255, 255, .5);padding:8px 16px}ion-header[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .05);margin:8px 16px;border-radius:12px}ion-header[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--color: rgba(255, 255, 255, .6);--color-checked: #ffffff;--indicator-color: #4285f4;font-size:13px;font-weight:500;min-height:36px}ion-list[_ngcontent-%COMP%]{background:transparent;padding:16px}ion-item[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .08);--border-color: transparent;--color: #ffffff;--padding-start: 16px;--padding-end: 16px;border-radius:12px;margin-bottom:12px;transition:all .3s ease}ion-item[_ngcontent-%COMP%]:hover{--background: rgba(255, 255, 255, .12)}ion-item.completed[_ngcontent-%COMP%]{opacity:.6}ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .1);--border-color: rgba(255, 255, 255, .3);--checkmark-color: #ffffff;--background-checked: #4285f4;--border-color-checked: #4285f4;margin-right:12px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-weight:500;margin-bottom:6px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffb3;font-size:14px}.task-completed[_ngcontent-%COMP%]{text-decoration:line-through;color:#ffffff80!important}.task-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;align-items:center}.task-meta[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{height:24px;margin:0;--background: rgba(66, 133, 244, .2);border:1px solid rgba(66,133,244,.3)}.task-meta[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px;color:#fff}.task-meta[_ngcontent-%COMP%]   ion-chip[color=success][_ngcontent-%COMP%]{--background: rgba(52, 199, 89, .2);border-color:#34c7594d}.task-meta[_ngcontent-%COMP%]   ion-chip[color=warning][_ngcontent-%COMP%]{--background: rgba(255, 159, 10, .2);border-color:#ff9f0a4d}.task-meta[_ngcontent-%COMP%]   ion-chip[color=danger][_ngcontent-%COMP%]{--background: rgba(235, 68, 90, .2);border-color:#eb445a4d}.task-meta[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:11px;padding:4px 8px;background:#ffffff1a;color:#fffc;border-radius:6px}ion-item-sliding[_ngcontent-%COMP%]   ion-item-options[_ngcontent-%COMP%]   ion-item-option[_ngcontent-%COMP%]{font-weight:500}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60vh;text-align:center;padding:20px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:120px;color:#ffffff4d;margin-bottom:24px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#fff;margin:0 0 12px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff9;font-size:16px;margin:0}ion-fab-button[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #4285f4 0%, #3367d6 100%);--box-shadow: 0 4px 16px rgba(66, 133, 244, .4)}ion-fab-button[_ngcontent-%COMP%]:hover{--box-shadow: 0 6px 20px rgba(66, 133, 244, .5);transform:translateY(-2px)}ion-refresher[_ngcontent-%COMP%]   ion-refresher-content[_ngcontent-%COMP%]{color:#fff}@media (min-width: 768px){ion-list[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:24px}}@media (prefers-color-scheme: light){ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)}}"]});let i=c;return i})()});Yt();export{he as TasksPage};
