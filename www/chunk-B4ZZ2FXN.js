import{a as c,l as u,n,na as l}from"./chunk-MUBZYPCN.js";import{a as o,f}from"./chunk-ECACSZ36.js";var i,p,h=f(()=>{"use strict";u();l();i="user_preferences",p=(()=>{let r=class r{constructor(){this.defaultPreferences={notificacoesEmail:!0,notificacoesPush:!0,tema:"auto",idioma:"pt-BR"};let e=this.loadFromStorage();this.preferencesSubject=new c(e||this.defaultPreferences),this.preferences$=this.preferencesSubject.asObservable(),this.applyTheme(this.currentPreferencesValue.tema)}get currentPreferencesValue(){return this.preferencesSubject.value}loadFromStorage(){try{let e=localStorage.getItem(i);return e?JSON.parse(e):null}catch(e){return console.error("Error loading preferences from storage:",e),null}}saveToStorage(e){try{localStorage.setItem(i,JSON.stringify(e))}catch(t){console.error("Error saving preferences to storage:",t)}}updatePreferences(e){let t=this.currentPreferencesValue,s=o(o({},t),e);this.preferencesSubject.next(s),this.saveToStorage(s),e.tema!==void 0&&this.applyTheme(e.tema)}resetPreferences(){this.preferencesSubject.next(this.defaultPreferences),this.saveToStorage(this.defaultPreferences),this.applyTheme(this.defaultPreferences.tema)}applyTheme(e){let t=window.matchMedia("(prefers-color-scheme: dark)").matches,s;switch(e){case"dark":s=!0;break;case"light":s=!1;break;case"auto":default:s=t;break}document.body.classList.toggle("dark",s)}initializeThemeListener(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{this.currentPreferencesValue.tema==="auto"&&this.applyTheme("auto")})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"});let a=r;return a})()});export{p as a,h as b};
