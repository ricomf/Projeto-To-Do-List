import{i as c,u as p}from"./chunk-TTVOGJMR.js";import{a as l,b as v,e as y,h as w,q as V}from"./chunk-VUSIEKOU.js";import{f as I,h as o}from"./chunk-ECACSZ36.js";var k,_,T,W,G,s,d,B,b,D,M,F,Z,S,R,L,q,x,O,h,Y,U,A,P,u,j,E,C,z,J,N=I(()=>{"use strict";V();p();k="ionViewWillEnter",_="ionViewDidEnter",T="ionViewWillLeave",W="ionViewDidLeave",G="ionViewWillUnload",s=n=>{n.tabIndex=-1,n.focus()},d=n=>n.offsetParent!==null,B=()=>({saveViewFocus:i=>{if(l.get("focusManagerPriority",!1)){let a=document.activeElement;a!==null&&i?.contains(a)&&a.setAttribute(b,"true")}},setViewFocus:i=>{let t=l.get("focusManagerPriority",!1);if(Array.isArray(t)&&!i.contains(document.activeElement)){let a=i.querySelector(`[${b}]`);if(a&&d(a)){s(a);return}for(let r of t)switch(r){case"content":let f=i.querySelector('main, [role="main"]');if(f&&d(f)){s(f);return}break;case"heading":let m=i.querySelector('h1, [role="heading"][aria-level="1"]');if(m&&d(m)){s(m);return}break;case"banner":let g=i.querySelector('header, [role="banner"]');if(g&&d(g)){s(g);return}break;default:v(`Unrecognized focus manager priority value ${r}`);break}s(i)}}}),b="ion-last-focus",D=()=>import("./chunk-AESENCBT.js"),M=()=>import("./chunk-YJS5SFGV.js"),F=B(),Z=n=>new Promise((e,i)=>{w(()=>{S(n),R(n).then(t=>{t.animation&&t.animation.destroy(),L(n),e(t)},t=>{L(n),i(t)})})}),S=n=>{let e=n.enteringEl,i=n.leavingEl;F.saveViewFocus(i),z(e,i,n.direction),n.showGoBack?e.classList.add("can-go-back"):e.classList.remove("can-go-back"),C(e,!1),e.style.setProperty("pointer-events","none"),i&&(C(i,!1),i.style.setProperty("pointer-events","none"))},R=n=>o(null,null,function*(){let e=yield q(n);return e&&y.isBrowser?x(e,n):O(n)}),L=n=>{let e=n.enteringEl,i=n.leavingEl;e.classList.remove("ion-page-invisible"),e.style.removeProperty("pointer-events"),i!==void 0&&(i.classList.remove("ion-page-invisible"),i.style.removeProperty("pointer-events")),F.setViewFocus(e)},q=n=>o(null,null,function*(){return!n.leavingEl||!n.animated||n.duration===0?void 0:n.animationBuilder?n.animationBuilder:n.mode==="ios"?(yield D()).iosTransitionAnimation:(yield M()).mdTransitionAnimation}),x=(n,e)=>o(null,null,function*(){yield h(e,!0);let i=n(e.baseEl,e);A(e.enteringEl,e.leavingEl);let t=yield U(i,e);return e.progressCallback&&e.progressCallback(void 0),t&&P(e.enteringEl,e.leavingEl),{hasCompleted:t,animation:i}}),O=n=>o(null,null,function*(){let e=n.enteringEl,i=n.leavingEl,t=l.get("focusManagerPriority",!1);return yield h(n,t),A(e,i),P(e,i),{hasCompleted:!0}}),h=(n,e)=>o(null,null,function*(){(n.deepWait!==void 0?n.deepWait:e)&&(yield Promise.all([E(n.enteringEl),E(n.leavingEl)])),yield Y(n.viewIsReady,n.enteringEl)}),Y=(n,e)=>o(null,null,function*(){n&&(yield n(e))}),U=(n,e)=>{let i=e.progressCallback,t=new Promise(a=>{n.onFinish(r=>a(r===1))});return i?(n.progressStart(!0),i(n)):n.play(),t},A=(n,e)=>{u(e,T),u(n,k)},P=(n,e)=>{u(n,_),u(e,W)},u=(n,e)=>{if(n){let i=new CustomEvent(e,{bubbles:!1,cancelable:!1});n.dispatchEvent(i)}},j=()=>new Promise(n=>c(()=>c(()=>n()))),E=n=>o(null,null,function*(){let e=n;if(e){if(e.componentOnReady!=null){if((yield e.componentOnReady())!=null)return}else if(e.__registerHost!=null){yield new Promise(t=>c(t));return}yield Promise.all(Array.from(e.children).map(E))}}),C=(n,e)=>{e?(n.setAttribute("aria-hidden","true"),n.classList.add("ion-page-hidden")):(n.hidden=!1,n.removeAttribute("aria-hidden"),n.classList.remove("ion-page-hidden"))},z=(n,e,i)=>{n!==void 0&&(n.style.zIndex=i==="back"?"99":"101"),e!==void 0&&(e.style.zIndex="100")},J=n=>{if(n.classList.contains("ion-page"))return n;let e=n.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return e||n}});export{T as a,W as b,G as c,Z as d,u as e,j as f,E as g,C as h,J as i,N as j};
