import{F as Y,I as U,Z as X,a as R,b as W,y as V,z as B}from"./chunk-DC72OUVS.js";import{y as G,z as Q}from"./chunk-W6BZYZPR.js";import"./chunk-NRZIFRM7.js";import{$ as h,$a as z,A as d,C as M,F as p,Fa as b,J as l,Ja as y,K as t,Ka as k,Kb as A,L as i,M as f,Na as S,Pa as m,Qa as L,R as u,Ra as E,S as _,Ua as I,Va as T,Wa as F,aa as g,ba as O,bb as N,cb as j,cc as D,na as J,oc as q,qa as x,ta as w,ua as v,uc as K,z as o}from"./chunk-MUBZYPCN.js";import"./chunk-IUOEA5VS.js";import"./chunk-GG6GQ6ON.js";import"./chunk-HKEYXBPG.js";import"./chunk-65VMTP75.js";import"./chunk-DKYB3LAM.js";import"./chunk-WKMV7HP7.js";import"./chunk-2CQGC6XC.js";import"./chunk-MOTUYE2F.js";import"./chunk-7BGE4CD4.js";import"./chunk-Z3ZIDQ56.js";import"./chunk-TRVT55KM.js";import"./chunk-NLP2MHHW.js";import"./chunk-KFF2YPXM.js";import"./chunk-VX62UQSI.js";import"./chunk-5R267MUJ.js";import{f as H,h as C}from"./chunk-ECACSZ36.js";function Z(n,r){n&1&&(t(0,"span"),g(1,"Email \xE9 obrigat\xF3rio"),i())}function $(n,r){n&1&&(t(0,"span"),g(1,"Email inv\xE1lido"),i())}function ee(n,r){if(n&1&&(t(0,"div",20),p(1,Z,2,0,"span",17)(2,$,2,0,"span",17),i()),n&2){let a=_();o(),l("ngIf",a.email==null||a.email.errors==null?null:a.email.errors.required),o(),l("ngIf",a.email==null||a.email.errors==null?null:a.email.errors.email)}}function ne(n,r){n&1&&(t(0,"span"),g(1,"Senha \xE9 obrigat\xF3ria"),i())}function te(n,r){n&1&&(t(0,"span"),g(1,"Senha deve ter no m\xEDnimo 6 caracteres"),i())}function oe(n,r){if(n&1&&(t(0,"div",20),p(1,ne,2,0,"span",17)(2,te,2,0,"span",17),i()),n&2){let a=_();o(),l("ngIf",a.password==null||a.password.errors==null?null:a.password.errors.required),o(),l("ngIf",a.password==null||a.password.errors==null?null:a.password.errors.minlength)}}function ie(n,r){if(n&1&&(t(0,"div",21)(1,"p"),g(2),i()()),n&2){let a=_();o(2),O(a.errorMessage)}}function re(n,r){n&1&&f(0,"ion-spinner",22)}function ae(n,r){n&1&&(t(0,"span"),g(1,"Logar"),i())}var Ce,le=H(()=>{v();j();k();K();W();X();J();j();Q();k();v();Ce=(()=>{let r=class r{constructor(c,s,e){this.formBuilder=c,this.authService=s,this.router=e,this.isLoading=!1,this.showPassword=!1,this.errorMessage="",R({mailOutline:U,lockClosedOutline:Y,eyeOutline:B,eyeOffOutline:V})}ngOnInit(){this.initializeForm()}initializeForm(){this.loginForm=this.formBuilder.group({email:["",[m.required,m.email]],password:["",[m.required,m.minLength(6)]]})}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}togglePasswordVisibility(){this.showPassword=!this.showPassword}onSubmit(){return C(this,null,function*(){if(this.loginForm.invalid){this.markFormGroupTouched(this.loginForm);return}this.isLoading=!0,this.errorMessage="";let c=this.loginForm.value;try{console.log("[LoginPage] Starting login...",c.email);let s=yield this.authService.login(c);console.log("[LoginPage] \u2705 Login successful!",s),console.log("[LoginPage] Auth status - isAuthenticated:",this.authService.isAuthenticated),console.log("[LoginPage] Token stored:",!!localStorage.getItem("auth_token")),yield new Promise(e=>setTimeout(e,100)),console.log("[LoginPage] Navigating to /tabs..."),yield this.router.navigate(["/tabs"],{replaceUrl:!0}),console.log("[LoginPage] Navigation completed"),this.isLoading=!1}catch(s){console.error("[LoginPage] \u274C Login error:",s),this.errorMessage=s?.message||"Erro ao fazer login. Tente novamente.",this.isLoading=!1}})}navigateToRegister(){this.router.navigate(["/auth/register"])}navigateToForgotPassword(){this.router.navigate(["/auth/forgot-password"])}markFormGroupTouched(c){Object.keys(c.controls).forEach(s=>{c.get(s)?.markAsTouched()})}};r.\u0275fac=function(s){return new(s||r)(d(z),d(G),d(b))},r.\u0275cmp=M({type:r,selectors:[["app-login"]],decls:28,vars:14,consts:[[1,"login-content",3,"fullscreen"],[1,"login-container"],[1,"header-section"],[1,"page-title"],[1,"welcome-message"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"input-group"],[1,"input-wrapper"],["name","mail-outline",1,"input-icon"],["type","email","formControlName","email","placeholder","Email","autocomplete","email",1,"custom-input"],["class","error-text",4,"ngIf"],["name","lock-closed-outline",1,"input-icon"],["formControlName","password","placeholder","Senha","autocomplete","current-password",1,"custom-input",3,"type"],[1,"toggle-password",3,"click","name"],["class","error-alert",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],["name","crescent","class","button-spinner",4,"ngIf"],[4,"ngIf"],[1,"register-link"],[3,"click"],[1,"error-text"],[1,"error-alert"],["name","crescent",1,"button-spinner"]],template:function(s,e){s&1&&(t(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"h1",3),g(4,"Login"),i(),t(5,"h2",4),g(6,"O que vamos fazer hoje?"),i()(),t(7,"form",5),u("ngSubmit",function(){return e.onSubmit()}),t(8,"div",6)(9,"div",7),f(10,"ion-icon",8)(11,"input",9),i(),p(12,ee,3,2,"div",10),i(),t(13,"div",6)(14,"div",7),f(15,"ion-icon",11)(16,"input",12),t(17,"ion-icon",13),u("click",function(){return e.togglePasswordVisibility()}),i()(),p(18,oe,3,2,"div",10),i(),p(19,ie,3,1,"div",14),t(20,"button",15),p(21,re,1,0,"ion-spinner",16)(22,ae,2,0,"span",17),i(),t(23,"div",18)(24,"p"),g(25," N\xE3o tem conta? "),t(26,"a",19),u("click",function(){return e.navigateToRegister()}),g(27,"Cadastre-se agora!"),i()()()()()()),s&2&&(l("fullscreen",!0),o(7),l("formGroup",e.loginForm),o(2),h("has-error",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),o(3),l("ngIf",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),o(2),h("has-error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),o(2),l("type",e.showPassword?"text":"password"),o(),l("name",e.showPassword?"eye-off-outline":"eye-outline"),o(),l("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),o(),l("ngIf",e.errorMessage),o(),l("disabled",e.isLoading),o(),l("ngIf",e.isLoading),o(),l("ngIf",!e.isLoading))},dependencies:[w,x,A,q,D,N,I,S,L,E,T,F,y],styles:[".login-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)}.login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;min-height:100vh;max-width:450px;margin:0 auto;padding:40px 24px}.header-section[_ngcontent-%COMP%]{margin-bottom:48px;text-align:left}.header-section[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#ffffffb3;margin:0 0 16px;letter-spacing:.5px}.header-section[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#fff;margin:0;line-height:1.2;letter-spacing:-.5px}.login-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{margin-bottom:20px}.login-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background:#ffffff14;border-radius:12px;padding:0 16px;height:56px;border:1px solid transparent;transition:all .3s ease}.login-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:focus-within{background:#ffffff1f;border-color:#4285f480}.login-form[_ngcontent-%COMP%]   .input-wrapper.has-error[_ngcontent-%COMP%]{border-color:#eb445a99}.login-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{font-size:20px;color:#ffffff80;margin-right:12px;flex-shrink:0}.login-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .custom-input[_ngcontent-%COMP%]{flex:1;background:transparent;border:none;outline:none;color:#fff;font-size:15px;font-weight:400;padding:0}.login-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .custom-input[_ngcontent-%COMP%]::placeholder{color:#fff6}.login-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .custom-input[_ngcontent-%COMP%]:-webkit-autofill{-webkit-box-shadow:0 0 0 1000px rgba(255,255,255,.08) inset;-webkit-text-fill-color:#ffffff;transition:background-color 5000s ease-in-out 0s}.login-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{font-size:20px;color:#ffffff80;cursor:pointer;flex-shrink:0;padding:8px;margin-right:-8px;transition:color .2s ease}.login-form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:hover{color:#fffc}.login-form[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{color:#ff6b6b;font-size:13px;margin-top:6px;margin-left:16px;font-weight:400}.login-form[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.login-form[_ngcontent-%COMP%]   .error-alert[_ngcontent-%COMP%]{background:#eb445a26;border:1px solid rgba(235,68,90,.3);border-radius:12px;padding:12px 16px;margin-bottom:20px}.login-form[_ngcontent-%COMP%]   .error-alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#ff6b6b;font-size:14px;text-align:center}.login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{width:100%;height:56px;background:linear-gradient(135deg,#4285f4,#3367d6);border:none;border-radius:28px;color:#fff;font-size:16px;font-weight:600;cursor:pointer;margin-top:8px;display:flex;align-items:center;justify-content:center;transition:all .3s ease;box-shadow:0 4px 16px #4285f44d}.login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#5294ff,#4478e8);box-shadow:0 6px 20px #4285f466;transform:translateY(-2px)}.login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]   .button-spinner[_ngcontent-%COMP%]{--color: #ffffff;width:20px;height:20px}.login-form[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]{text-align:center;margin-top:24px}.login-form[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#fff9;font-size:14px;font-weight:400}.login-form[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4285f4;font-weight:600;cursor:pointer;text-decoration:none;margin-left:4px;transition:color .2s ease}.login-form[_ngcontent-%COMP%]   .register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#5294ff;text-decoration:underline}@media (min-width: 768px){.login-container[_ngcontent-%COMP%]{padding:60px 40px}.header-section[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]{font-size:36px}}@media (prefers-color-scheme: light){.login-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)}}"]});let n=r;return n})()});le();export{Ce as LoginPage};
