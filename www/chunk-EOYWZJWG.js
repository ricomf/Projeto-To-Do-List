import{a as pe,b as Me}from"./chunk-ENFGIFJN.js";import{a as de,b as xe,c as ge,d as Oe}from"./chunk-NYAYANX7.js";import{L as le,Z as Ce,a as ie,b as be,c as ae,f as ce,g as se}from"./chunk-DC72OUVS.js";import{d as ne,g as p,x as he,y as re,z as ue}from"./chunk-W6BZYZPR.js";import"./chunk-NRZIFRM7.js";import{$b as K,A as P,C as I,Cb as D,Eb as L,F as M,Fa as T,Fb as R,Gb as F,Hb as V,Ib as N,J as f,Jb as A,K as o,Ka as Pe,Kb as H,L as r,M as m,Mb as B,Nb as U,Ob as q,Pb as Y,Q as j,R as u,S as b,Ub as $,Yb as G,Zb as J,_ as w,_b as W,aa as l,ab as z,ba as v,ca as C,cb as _e,fc as Q,gc as X,ic as Z,mc as ee,na as me,oc as te,pa as k,qa as y,r as x,s as O,ta as S,ua as E,uc as oe,z as a}from"./chunk-MUBZYPCN.js";import"./chunk-IUOEA5VS.js";import"./chunk-GG6GQ6ON.js";import"./chunk-HKEYXBPG.js";import"./chunk-65VMTP75.js";import"./chunk-DKYB3LAM.js";import"./chunk-WKMV7HP7.js";import"./chunk-2CQGC6XC.js";import"./chunk-MOTUYE2F.js";import"./chunk-7BGE4CD4.js";import"./chunk-Z3ZIDQ56.js";import"./chunk-TRVT55KM.js";import"./chunk-NLP2MHHW.js";import"./chunk-KFF2YPXM.js";import"./chunk-VX62UQSI.js";import"./chunk-5R267MUJ.js";import{f as fe,h}from"./chunk-ECACSZ36.js";function je(c,d){if(c&1){let n=j();o(0,"ion-col",10)(1,"ion-card",11),u("click",function(){let t=x(n).$implicit,i=b(2);return O(i.viewProject(t))}),o(2,"ion-card-header")(3,"div",12)(4,"ion-chip",13)(5,"ion-label"),l(6),r()()(),o(7,"ion-card-title"),l(8),r()(),o(9,"ion-card-content")(10,"div",14)(11,"div",15),m(12,"ion-icon",16),o(13,"span"),l(14),r()()(),o(15,"div",17)(16,"div",18)(17,"span"),l(18,"Progresso"),r(),o(19,"span"),l(20),r()(),m(21,"ion-progress-bar",19),r(),o(22,"div",20)(23,"small"),m(24,"ion-icon",21),l(25),r()()()()()}if(c&2){let n=d.$implicit,e=b(2);a(2),w("border-left","4px solid "+n.cor),a(2),f("color",e.getStatusColor(n.status)),a(2),v(e.getStatusLabel(n.status)),a(2),v(n.nome),a(6),C("",n.tasks&&n.tasks.length||0," tarefas"),a(6),C("",(e.getProjectProgress(n)*100).toFixed(0),"%"),a(),f("value",e.getProjectProgress(n)),a(4),C(" Criado em ",e.formatDate(n.dataCriacao)," ")}}function ve(c,d){if(c&1&&(o(0,"ion-grid")(1,"ion-row"),M(2,je,26,9,"ion-col",9),r()()),c&2){let n=b();a(2),f("ngForOf",n.projects)}}function Ie(c,d){if(c&1){let n=j();o(0,"div",22),m(1,"ion-icon",23),o(2,"h2"),l(3,"Nenhum projeto encontrado"),r(),o(4,"p"),l(5,"Comece criando seu primeiro projeto!"),r(),o(6,"ion-button",7),u("click",function(){x(n);let t=b();return O(t.createNewProject())}),m(7,"ion-icon",24),l(8," Criar Projeto "),r()()}}var qe,we=fe(()=>{E();_e();oe();be();Ce();he();Me();me();Pe();xe();ue();Oe();oe();E();qe=(()=>{let d=class d{constructor(e,t,i,s,g,_){this.router=e,this.projectService=t,this.authService=i,this.taskService=s,this.modalCtrl=g,this.toastCtrl=_,this.projects=[],this.isLoading=!1,ie({add:ae,briefcase:ce,people:le,calendar:se})}ngOnInit(){this.loadProjects(),this.subscribeToProjects()}subscribeToProjects(){this.projectService.getProjects().subscribe(e=>{this.projects=e})}loadProjects(){return h(this,null,function*(){this.isLoading=!0;try{let e=this.authService.getCurrentUserId();yield this.projectService.loadProjects(e||void 0)}catch(e){console.error("Error loading projects:",e),this.showToast("Erro ao carregar projetos")}finally{this.isLoading=!1}})}handleRefresh(e){return h(this,null,function*(){yield this.loadProjects(),e.target.complete()})}viewProject(e){this.router.navigate(["/project-detail",e.id])}createNewProject(){return h(this,null,function*(){let e=yield this.modalCtrl.create({component:pe,backdropDismiss:!1});yield e.present();let{data:t,role:i}=yield e.onWillDismiss();if(console.log("[ProjectsPage] Modal dismissed with role:",i,"data:",t),i==="confirm"&&t){let s=this.authService.getCurrentUserId();if(console.log("[ProjectsPage] Current user ID:",s),!s){this.showToast("Erro: Usu\xE1rio n\xE3o autenticado");return}try{console.log("[ProjectsPage] Creating project with data:",t);let g=yield this.projectService.createProject(t,s);console.log("[ProjectsPage] Project created:",g),g?this.showToast("Projeto criado com sucesso!"):this.showToast("Erro ao criar projeto")}catch(g){console.error("[ProjectsPage] Error creating project:",g),this.showToast("Erro ao criar projeto: "+g)}}})}showToast(e){return h(this,null,function*(){yield(yield this.toastCtrl.create({message:e,duration:2e3,position:"bottom"})).present()})}getStatusColor(e){return{[p.ACTIVE]:"success",[p.COMPLETED]:"primary",[p.ARCHIVED]:"medium",[p.ON_HOLD]:"warning"}[e]}getStatusLabel(e){return{[p.ACTIVE]:"Ativo",[p.COMPLETED]:"Conclu\xEDdo",[p.ARCHIVED]:"Arquivado",[p.ON_HOLD]:"Em Espera"}[e]}getProjectProgress(e){if(!e.tasks||e.tasks.length===0)return 0;let t=localStorage.getItem("user_tasks");if(!t)return 0;let s=JSON.parse(t).filter(_=>e.tasks?.includes(_.id));return s.length===0?0:s.filter(_=>_.status===ne.COMPLETED).length/s.length}formatDate(e){return new Date(e).toLocaleDateString("pt-BR")}};d.\u0275fac=function(t){return new(t||d)(P(T),P(de),P(re),P(ge),P(Z),P(ee))},d.\u0275cmp=I({type:d,selectors:[["app-projects"]],decls:12,vars:4,consts:[[3,"translucent"],["color","primary"],[1,"ion-padding",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],["class","empty-state",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],["size","12","size-md","6","size-lg","4",4,"ngFor","ngForOf"],["size","12","size-md","6","size-lg","4"],["button","",3,"click"],[1,"card-header-top"],[3,"color"],[1,"project-stats"],[1,"stat-item"],["name","checkmark-circle-outline"],[1,"progress-section"],[1,"progress-label"],[3,"value"],[1,"project-dates"],["name","calendar-outline"],[1,"empty-state"],["name","briefcase-outline"],["name","add","slot","start"]],template:function(t,i){t&1&&(o(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),l(3,"Projetos"),r()()(),o(4,"ion-content",2)(5,"ion-refresher",3),u("ionRefresh",function(g){return i.handleRefresh(g)}),m(6,"ion-refresher-content"),r(),M(7,ve,3,1,"ion-grid",4)(8,Ie,9,0,"div",5),o(9,"ion-fab",6)(10,"ion-fab-button",7),u("click",function(){return i.createNewProject()}),m(11,"ion-icon",8),r()()()),t&2&&(f("translucent",!0),a(4),f("fullscreen",!0),a(3),f("ngIf",i.projects.length>0),a(),f("ngIf",i.projects.length===0&&!i.isLoading))},dependencies:[S,k,y,z,Y,X,Q,H,L,F,V,R,B,U,te,N,$,G,D,J,W,q,K,A],styles:["ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: rgba(26, 26, 46, .95);--color: #ffffff;--border-color: rgba(255, 255, 255, .1)}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-weight:600}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: #ffffff}ion-grid[_ngcontent-%COMP%]{padding:16px;max-width:1200px;margin:0 auto}ion-card[_ngcontent-%COMP%]{background:#ffffff14;border-radius:16px;border:1px solid rgba(255,255,255,.1);cursor:pointer;transition:all .3s ease;margin-bottom:16px}ion-card[_ngcontent-%COMP%]:hover{background:#ffffff1f;transform:translateY(-4px);box-shadow:0 8px 24px #0000004d}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:20px;border-left-width:4px;border-left-style:solid}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:0 20px 20px;color:#ffffffe6}.card-header-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.card-header-top[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin:0;height:24px;--background: rgba(66, 133, 244, .2);border:1px solid rgba(66,133,244,.3)}.card-header-top[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px;color:#fff}.card-header-top[_ngcontent-%COMP%]   ion-chip[color=success][_ngcontent-%COMP%]{--background: rgba(52, 199, 89, .2);border-color:#34c7594d}.card-header-top[_ngcontent-%COMP%]   ion-chip[color=warning][_ngcontent-%COMP%]{--background: rgba(255, 159, 10, .2);border-color:#ff9f0a4d}.card-header-top[_ngcontent-%COMP%]   ion-chip[color=danger][_ngcontent-%COMP%]{--background: rgba(235, 68, 90, .2);border-color:#eb445a4d}.card-header-top[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:11px;background:#8a63d233;color:#fff;border:1px solid rgba(138,99,210,.3)}ion-card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#fff;margin-bottom:8px}ion-card-subtitle[_ngcontent-%COMP%]{color:#ffffffb3;font-size:14px;line-height:1.5}.project-stats[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px;padding:12px 0;border-top:1px solid rgba(255,255,255,.1)}.project-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:14px;color:#ffffffb3}.project-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#fff9}.progress-section[_ngcontent-%COMP%]{margin-bottom:12px}.progress-section[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:13px;color:#ffffffb3;margin-bottom:8px;font-weight:500}.progress-section[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{height:8px;border-radius:4px;--background: rgba(255, 255, 255, .1);--progress-background: linear-gradient(90deg, #4285f4, #5294ff)}.project-dates[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:12px;color:#fff9}.project-dates[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:70vh;text-align:center;padding:20px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:120px;color:#ffffff4d;margin-bottom:24px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#fff;margin:0 0 12px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff9;font-size:16px;margin:0 0 24px}.empty-state[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #4285f4 0%, #3367d6 100%);--border-radius: 24px;height:48px;font-weight:600;--box-shadow: 0 4px 16px rgba(66, 133, 244, .3)}.empty-state[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{--box-shadow: 0 6px 20px rgba(66, 133, 244, .4)}ion-fab-button[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #4285f4 0%, #3367d6 100%);--box-shadow: 0 4px 16px rgba(66, 133, 244, .4)}ion-fab-button[_ngcontent-%COMP%]:hover{--box-shadow: 0 6px 20px rgba(66, 133, 244, .5);transform:translateY(-2px)}ion-refresher[_ngcontent-%COMP%]   ion-refresher-content[_ngcontent-%COMP%]{color:#fff}@media (min-width: 768px){ion-grid[_ngcontent-%COMP%]{padding:24px}}@media (prefers-color-scheme: light){ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)}}"]});let c=d;return c})()});we();export{qe as ProjectsPage};
