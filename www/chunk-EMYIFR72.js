import{B as Pe,D as xe,G as be,H as Me,J as Oe,K as we,M as Ie,R as Se,V as Ee,Z as ye,a as B,b as ue,h as _e,n as he,o as ve,t as Ce}from"./chunk-DC72OUVS.js";import{a as pe,b as je}from"./chunk-B4ZZ2FXN.js";import{c as de,x as Ne,y as ge,z as Ae}from"./chunk-W6BZYZPR.js";import"./chunk-NRZIFRM7.js";import{$a as te,A as d,Ab as I,C as x,Cb as S,Db as ie,Eb as re,F as v,Fa as K,Fb as ae,J as m,K as i,Ka as ze,Kb as E,L as o,M as p,Pa as C,Pb as y,Q as Y,Qa as Q,Qb as k,R as u,Ra as X,S as _,Ua as Z,Ub as T,Va as $,Vb as F,Wa as ee,Wb as le,Xb as se,aa as s,ab as ne,ba as L,bb as oe,ca as b,cb as R,fc as U,gc as z,ic as j,kc as ce,lc as fe,mc as N,na as J,oc as A,pc as me,qa as M,r as H,s as W,ta as O,ua as w,uc as D,y as P,z as f}from"./chunk-MUBZYPCN.js";import"./chunk-IUOEA5VS.js";import"./chunk-GG6GQ6ON.js";import"./chunk-HKEYXBPG.js";import"./chunk-65VMTP75.js";import"./chunk-DKYB3LAM.js";import"./chunk-WKMV7HP7.js";import"./chunk-2CQGC6XC.js";import"./chunk-MOTUYE2F.js";import"./chunk-7BGE4CD4.js";import"./chunk-Z3ZIDQ56.js";import"./chunk-TRVT55KM.js";import"./chunk-NLP2MHHW.js";import"./chunk-KFF2YPXM.js";import"./chunk-VX62UQSI.js";import"./chunk-5R267MUJ.js";import{a as V,b as q,f as G,h as g}from"./chunk-ECACSZ36.js";function Re(n,l){if(n&1&&p(0,"img",20),n&2){let r=_();m("src",r.previewUrl,P)("alt",r.profileForm.value.nome)}}function Ve(n,l){if(n&1&&(i(0,"div",21),s(1),o()),n&2){let r=_();f(),b(" ",r.getInitials(r.profileForm.value.nome)," ")}}function qe(n,l){n&1&&(i(0,"p"),s(1,"Nome \xE9 obrigat\xF3rio"),o())}function Ge(n,l){n&1&&(i(0,"p"),s(1,"Nome deve ter no m\xEDnimo 3 caracteres"),o())}function He(n,l){if(n&1&&(i(0,"div",22),v(1,qe,2,0,"p",23)(2,Ge,2,0,"p",23),o()),n&2){let r,t,e=_();f(),m("ngIf",(r=e.profileForm.get("nome"))==null||r.errors==null?null:r.errors.required),f(),m("ngIf",(t=e.profileForm.get("nome"))==null||t.errors==null?null:t.errors.minlength)}}function We(n,l){n&1&&(i(0,"p"),s(1,"Email \xE9 obrigat\xF3rio"),o())}function Ye(n,l){n&1&&(i(0,"p"),s(1,"Email inv\xE1lido"),o())}function Je(n,l){if(n&1&&(i(0,"div",22),v(1,We,2,0,"p",23)(2,Ye,2,0,"p",23),o()),n&2){let r,t,e=_();f(),m("ngIf",(r=e.profileForm.get("email"))==null||r.errors==null?null:r.errors.required),f(),m("ngIf",(t=e.profileForm.get("email"))==null||t.errors==null?null:t.errors.email)}}var ke,Te=G(()=>{"use strict";w();R();D();ue();ye();J();D();R();w();ke=(()=>{let l=class l{constructor(t,e,a){this.modalController=t,this.formBuilder=e,this.toastController=a,this.selectedFile=null,this.previewUrl=null,B({close:ve,save:Se,camera:_e})}ngOnInit(){this.initializeForm(),this.userProfile?.avatarUrl&&(this.previewUrl=this.userProfile.avatarUrl)}initializeForm(){this.profileForm=this.formBuilder.group({nome:[this.userProfile?.nome||"",[C.required,C.minLength(3)]],email:[this.userProfile?.email||"",[C.required,C.email]]})}onFileSelected(t){let e=t.target.files[0];if(e){this.selectedFile=e;let a=new FileReader;a.onload=c=>{this.previewUrl=c.target.result},a.readAsDataURL(e)}}triggerFileInput(){document.getElementById("avatar-input")?.click()}getInitials(t){return t?t.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):""}save(){return g(this,null,function*(){if(this.profileForm.valid){let t=q(V({},this.userProfile),{nome:this.profileForm.value.nome,email:this.profileForm.value.email,avatarUrl:this.previewUrl||this.userProfile.avatarUrl});yield this.modalController.dismiss(t,"save")}else yield(yield this.toastController.create({message:"Por favor, preencha todos os campos corretamente",duration:2e3,position:"bottom",color:"warning"})).present()})}cancel(){this.modalController.dismiss(null,"cancel")}};l.\u0275fac=function(e){return new(e||l)(d(j),d(te),d(N))},l.\u0275cmp=x({type:l,selectors:[["app-profile-edit-modal"]],inputs:{userProfile:"userProfile"},decls:33,vars:6,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close"],["slot","end"],[3,"click","strong"],["name","save","slot","start"],[1,"avatar-section"],[1,"profile-avatar",3,"click"],[3,"src","alt",4,"ngIf"],["class","avatar-placeholder",4,"ngIf"],[1,"avatar-overlay"],["name","camera"],["type","file","id","avatar-input","accept","image/*",2,"display","none",3,"change"],[1,"avatar-hint"],[3,"formGroup"],["position","stacked"],["formControlName","nome","type","text","placeholder","Digite seu nome"],["class","error-message",4,"ngIf"],["formControlName","email","type","email","placeholder","Digite seu email"],[3,"src","alt"],[1,"avatar-placeholder"],[1,"error-message"],[4,"ngIf"]],template:function(e,a){if(e&1&&(i(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),u("click",function(){return a.cancel()}),p(4,"ion-icon",3),o()(),i(5,"ion-title"),s(6,"Editar Perfil"),o(),i(7,"ion-buttons",4)(8,"ion-button",5),u("click",function(){return a.save()}),p(9,"ion-icon",6),s(10," Salvar "),o()()()(),i(11,"ion-content")(12,"div",7)(13,"ion-avatar",8),u("click",function(){return a.triggerFileInput()}),v(14,Re,1,2,"img",9)(15,Ve,2,1,"div",10),i(16,"div",11),p(17,"ion-icon",12),o()(),i(18,"input",13),u("change",function(h){return a.onFileSelected(h)}),o(),i(19,"p",14),s(20,"Toque na imagem para alterar"),o()(),i(21,"form",15)(22,"ion-list")(23,"ion-item")(24,"ion-label",16),s(25,"Nome Completo *"),o(),p(26,"ion-input",17),o(),v(27,He,3,2,"div",18),i(28,"ion-item")(29,"ion-label",16),s(30,"Email *"),o(),p(31,"ion-input",19),o(),v(32,Je,3,2,"div",18),o()()()),e&2){let c,h;f(8),m("strong",!0),f(6),m("ngIf",a.previewUrl),f(),m("ngIf",!a.previewUrl),f(6),m("formGroup",a.profileForm),f(6),m("ngIf",((c=a.profileForm.get("nome"))==null?null:c.invalid)&&((c=a.profileForm.get("nome"))==null?null:c.touched)),f(5),m("ngIf",((h=a.profileForm.get("email"))==null?null:h.invalid)&&((h=a.profileForm.get("email"))==null?null:h.touched))}},dependencies:[O,M,oe,Z,Q,X,$,ee,y,z,U,E,ie,S,F,k,T,me,A,I],styles:["ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)}.avatar-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:32px 16px}.avatar-section[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]{width:120px;height:120px;cursor:pointer;position:relative;transition:transform .2s ease}.avatar-section[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.avatar-section[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#4285f4,#3367d6);color:#fff;font-weight:700;font-size:40px;border-radius:50%}.avatar-section[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid rgba(66,133,244,.5);object-fit:cover}.avatar-section[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]   .avatar-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;width:36px;height:36px;border-radius:50%;background:#4285f4;display:flex;align-items:center;justify-content:center;border:3px solid #1a1a2e}.avatar-section[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]   .avatar-overlay[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff;font-size:18px}.avatar-section[_ngcontent-%COMP%]   .avatar-hint[_ngcontent-%COMP%]{margin-top:12px;font-size:13px;color:#fff9;text-align:center}ion-list[_ngcontent-%COMP%]{background:transparent;padding:0 16px}ion-item[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .08);--border-color: transparent;--color: #ffffff;--padding-start: 16px;--padding-end: 16px;border-radius:12px;margin-bottom:16px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#fffc;font-weight:500;margin-bottom:8px}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--color: #ffffff;--placeholder-color: rgba(255, 255, 255, .4);font-size:16px}.error-message[_ngcontent-%COMP%]{padding:0 16px;margin-top:-12px;margin-bottom:12px}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ff6b6b;font-size:13px;margin:4px 0}ion-toolbar[_ngcontent-%COMP%]{--background: rgba(26, 26, 46, .95);--color: #ffffff}ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: #ffffff}ion-toolbar[_ngcontent-%COMP%]   ion-button[strong][_ngcontent-%COMP%]{font-weight:600}"]});let n=l;return n})()});function Ke(n,l){if(n&1&&p(0,"img",19),n&2){let r=_(2);m("src",r.userProfile.avatarUrl,P)("alt",r.userProfile.nome)}}function Qe(n,l){if(n&1&&(i(0,"div",20),s(1),o()),n&2){let r=_(2);f(),b(" ",r.getInitials(r.userProfile.nome)," ")}}function Xe(n,l){if(n&1){let r=Y();i(0,"ion-card",12)(1,"ion-card-content")(2,"div",13),u("click",function(){H(r);let e=_();return W(e.navigateToProfile())}),i(3,"ion-avatar",14),v(4,Ke,1,2,"img",15)(5,Qe,2,1,"div",16),o(),i(6,"div",17)(7,"h2"),s(8),o(),i(9,"p"),s(10),o()(),p(11,"ion-icon",18),o()()()}if(n&2){let r=_();f(4),m("ngIf",r.userProfile.avatarUrl),f(),m("ngIf",!r.userProfile.avatarUrl),f(3),L(r.userProfile.nome),f(2),L(r.userProfile.email)}}var vt,Ze=G(()=>{w();R();D();ue();ye();Ne();Te();J();Ae();je();ze();D();w();vt=(()=>{let l=class l{constructor(t,e,a,c,h,Fe,Ue){this.authService=t,this.preferencesService=e,this.router=a,this.alertController=c,this.actionSheetController=h,this.toastController=Fe,this.modalController=Ue,this.preferences={notificacoesEmail:!0,notificacoesPush:!0,tema:"auto",idioma:"pt-BR"},B({person:Ie,notifications:we,moon:Oe,language:xe,logOut:be,help:Pe,shield:Ee,documentText:Ce,chevronForward:he,mail:Me})}ngOnInit(){this.loadUserProfile(),this.loadPreferences()}loadUserProfile(){return g(this,null,function*(){try{let t=this.authService.currentUserValue;t&&(this.userProfile={id:t.id,nome:t.nome,email:t.email,avatarUrl:void 0,roles:[de.USER],dataCriacao:new Date,dataAtualizacao:new Date,ativo:!0,preferencias:this.preferences})}catch(t){console.error("Error loading user profile:",t)}})}loadPreferences(){this.preferences=this.preferencesService.currentPreferencesValue}updatePreferences(){return g(this,null,function*(){try{this.preferencesService.updatePreferences(this.preferences),yield(yield this.toastController.create({message:"Prefer\xEAncias atualizadas com sucesso!",duration:2e3,position:"bottom",color:"success"})).present()}catch(t){console.error("Error updating preferences:",t)}})}navigateToProfile(){return g(this,null,function*(){if(!this.userProfile)return;let t=yield this.modalController.create({component:ke,componentProps:{userProfile:this.userProfile}});yield t.present();let{data:e,role:a}=yield t.onWillDismiss();if(a==="save"&&e)try{yield this.authService.updateUser({nome:e.nome,email:e.email,avatarUrl:e.avatarUrl}),this.userProfile=e,yield(yield this.toastController.create({message:"Perfil salvo com sucesso!",duration:2e3,position:"bottom",color:"success"})).present()}catch(c){console.error("Error updating profile:",c),yield(yield this.toastController.create({message:c.message||"Erro ao salvar perfil",duration:3e3,position:"bottom",color:"danger"})).present()}})}changeTheme(){return g(this,null,function*(){yield(yield this.actionSheetController.create({header:"Escolha o tema",buttons:[{text:"Claro",handler:()=>{this.preferences.tema="light",this.updatePreferences()}},{text:"Escuro",handler:()=>{this.preferences.tema="dark",this.updatePreferences()}},{text:"Autom\xE1tico",handler:()=>{this.preferences.tema="auto",this.updatePreferences()}},{text:"Cancelar",role:"cancel"}]})).present()})}navigateToSecurity(){return g(this,null,function*(){yield(yield this.alertController.create({header:"Alterar Senha",inputs:[{name:"currentPassword",type:"password",placeholder:"Senha atual"},{name:"newPassword",type:"password",placeholder:"Nova senha"},{name:"confirmPassword",type:"password",placeholder:"Confirmar nova senha"}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Alterar",handler:e=>g(this,null,function*(){return!e.currentPassword||!e.newPassword||!e.confirmPassword?(yield(yield this.toastController.create({message:"Por favor, preencha todos os campos",duration:2e3,position:"bottom",color:"warning"})).present(),!1):e.newPassword!==e.confirmPassword?(yield(yield this.toastController.create({message:"As senhas n\xE3o conferem",duration:2e3,position:"bottom",color:"warning"})).present(),!1):e.newPassword.length<6?(yield(yield this.toastController.create({message:"A senha deve ter no m\xEDnimo 6 caracteres",duration:2e3,position:"bottom",color:"warning"})).present(),!1):(yield(yield this.toastController.create({message:"Senha alterada com sucesso!",duration:2e3,position:"bottom",color:"success"})).present(),!0)})}]})).present()})}navigateToHelp(){this.router.navigate(["/help"])}navigateToPrivacy(){this.router.navigate(["/privacy"])}navigateToTerms(){this.router.navigate(["/terms"])}logout(){return g(this,null,function*(){yield(yield this.alertController.create({header:"Sair",message:"Tem certeza que deseja sair?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Sair",role:"destructive",handler:()=>g(this,null,function*(){try{yield this.authService.logout(),this.router.navigate(["/auth/login"])}catch(e){console.error("Error during logout:",e)}})}]})).present()})}getInitials(t){return t.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2)}};l.\u0275fac=function(e){return new(e||l)(d(ge),d(pe),d(K),d(fe),d(ce),d(N),d(j))},l.\u0275cmp=x({type:l,selectors:[["app-settings"]],decls:34,vars:3,consts:[[3,"translucent"],["color","primary"],[3,"fullscreen"],["class","profile-card",4,"ngIf"],["button","",3,"click"],["name","person","slot","start"],["name","chevron-forward","slot","end"],["name","shield","slot","start"],["slot","end"],[1,"logout-section"],["expand","block","color","danger",3,"click"],["name","log-out","slot","start"],[1,"profile-card"],[1,"profile-info",3,"click"],[1,"profile-avatar"],[3,"src","alt",4,"ngIf"],["class","avatar-placeholder",4,"ngIf"],[1,"profile-details"],["name","chevron-forward"],[3,"src","alt"],[1,"avatar-placeholder"]],template:function(e,a){e&1&&(i(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),s(3,"Configura\xE7\xF5es"),o()()(),i(4,"ion-content",2),v(5,Xe,12,4,"ion-card",3),i(6,"ion-list")(7,"ion-list-header")(8,"ion-label"),s(9,"Conta"),o()(),i(10,"ion-item",4),u("click",function(){return a.navigateToProfile()}),p(11,"ion-icon",5),i(12,"ion-label"),s(13,"Editar Perfil"),o(),p(14,"ion-icon",6),o(),i(15,"ion-item",4),u("click",function(){return a.navigateToSecurity()}),p(16,"ion-icon",7),i(17,"ion-label"),s(18,"Seguran\xE7a"),o(),p(19,"ion-icon",6),o()(),i(20,"ion-list")(21,"ion-list-header")(22,"ion-label"),s(23,"Sobre"),o()(),i(24,"ion-item")(25,"ion-label")(26,"p"),s(27,"Vers\xE3o"),o()(),i(28,"ion-note",8),s(29,"1.1.0"),o()()(),i(30,"div",9)(31,"ion-button",10),u("click",function(){return a.logout()}),p(32,"ion-icon",11),s(33," Sair "),o()()()),e&2&&(m("translucent",!0),f(4),m("fullscreen",!0),f(),m("ngIf",a.userProfile))},dependencies:[O,M,ne,y,z,U,E,F,k,T,A,le,I,S,re,ae,se],styles:["ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: rgba(26, 26, 46, .95);--color: #ffffff;--border-color: rgba(255, 255, 255, .1)}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-weight:600}.profile-card[_ngcontent-%COMP%]{margin:16px;background:#ffffff14;border-radius:16px;border:1px solid rgba(255,255,255,.1)}.profile-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:20px}.profile-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;cursor:pointer;transition:opacity .2s ease}.profile-info[_ngcontent-%COMP%]:hover{opacity:.8}.profile-info[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]{width:64px;height:64px;flex-shrink:0}.profile-info[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#4285f4,#3367d6);color:#fff;font-weight:700;font-size:24px;border-radius:50%}.profile-info[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:2px solid rgba(66,133,244,.5)}.profile-info[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]{flex:1}.profile-info[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 6px;font-size:20px;font-weight:600;color:#fff}.profile-info[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#ffffffb3}.profile-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#ffffff80}ion-list[_ngcontent-%COMP%]{margin-bottom:16px;background:transparent;padding:0 16px}ion-list-header[_ngcontent-%COMP%]{font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:.8px;color:#ffffff80;padding:20px 0 12px;background:transparent}ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#ffffff80}ion-item[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .08);--border-color: transparent;--color: #ffffff;--padding-start: 16px;--padding-end: 16px;border-radius:12px;margin-bottom:8px;transition:all .2s ease}ion-item[_ngcontent-%COMP%]:hover{--background: rgba(255, 255, 255, .12)}ion-item[button][_ngcontent-%COMP%]{cursor:pointer}ion-item[_ngcontent-%COMP%]   ion-icon[slot=start][_ngcontent-%COMP%]{margin-right:16px;font-size:24px;color:#4285f4}ion-item[_ngcontent-%COMP%]   ion-icon[slot=end][_ngcontent-%COMP%]{color:#fff6;font-size:18px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#fff}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:500;color:#fff;margin-bottom:4px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#fff9;margin-top:2px}ion-item[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .2);--background-checked: #4285f4;--handle-background: #ffffff;--handle-background-checked: #ffffff}ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{color:#fff9;font-size:14px}.logout-section[_ngcontent-%COMP%]{padding:24px 16px 32px}.logout-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: rgba(235, 68, 90, .2);--background-hover: rgba(235, 68, 90, .3);--background-activated: rgba(235, 68, 90, .4);--border-radius: 12px;--color: #ff6b6b;--box-shadow: none;border:1px solid rgba(235,68,90,.3);height:52px;font-weight:600;font-size:16px;transition:all .2s ease}.logout-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{--background: rgba(235, 68, 90, .3);transform:translateY(-2px)}.logout-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}@media (min-width: 768px){.profile-card[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{max-width:600px;margin-left:auto;margin-right:auto}.logout-section[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}}@media (prefers-color-scheme: light){ion-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)}}"]});let n=l;return n})()});Ze();export{vt as SettingsPage};
