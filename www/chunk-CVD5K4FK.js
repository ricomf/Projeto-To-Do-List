import{c as it,d as dt}from"./chunk-NYAYANX7.js";import{P as Z,W as tt,X as et,Z as lt,a as J,b as ct,g as Q,m as X,s as Y}from"./chunk-DC72OUVS.js";import{d as m,e as p,x as st}from"./chunk-W6BZYZPR.js";import"./chunk-NRZIFRM7.js";import{A as h,C as I,Ca as S,Cb as z,Da as y,Db as A,Eb as R,F as _,Fa as D,Fb as N,Gb as B,Hb as V,Ib as j,J as l,K as i,Ka as w,Kb as H,L as a,M as u,Pb as F,Q as b,R as C,S as f,Ub as G,aa as s,ba as d,fc as U,gc as $,i as P,lc as W,na as rt,oc as q,pa as O,qa as M,r as k,s as v,ta as T,u as ot,ua as E,ub as L,uc as K,z as r}from"./chunk-MUBZYPCN.js";import"./chunk-IUOEA5VS.js";import"./chunk-GG6GQ6ON.js";import"./chunk-HKEYXBPG.js";import"./chunk-65VMTP75.js";import"./chunk-DKYB3LAM.js";import"./chunk-WKMV7HP7.js";import"./chunk-2CQGC6XC.js";import"./chunk-MOTUYE2F.js";import"./chunk-7BGE4CD4.js";import"./chunk-Z3ZIDQ56.js";import"./chunk-TRVT55KM.js";import"./chunk-NLP2MHHW.js";import"./chunk-KFF2YPXM.js";import"./chunk-VX62UQSI.js";import"./chunk-5R267MUJ.js";import{f as at,h as x}from"./chunk-ECACSZ36.js";function mt(n,c){if(n&1&&(i(0,"div",10)(1,"h3"),s(2,"Descri\xE7\xE3o"),a(),i(3,"p",21),s(4),a()()),n&2){let t=f(2);r(4),d(t.task.descricao)}}function pt(n,c){if(n&1&&(i(0,"div",10)(1,"h3"),u(2,"ion-icon",22),s(3," Data de Vencimento "),a(),i(4,"p"),s(5),a()()),n&2){let t=f(2);r(5),d(t.formatDate(t.task.dataVencimento))}}function gt(n,c){if(n&1&&(i(0,"ion-chip",26)(1,"ion-label"),s(2),a()()),n&2){let t=c.$implicit;r(2),d(t)}}function ut(n,c){if(n&1&&(i(0,"div",10)(1,"h3"),u(2,"ion-icon",23),s(3," Tags "),a(),i(4,"div",24),_(5,gt,3,1,"ion-chip",25),a()()),n&2){let t=f(2);r(5),l("ngForOf",t.task.tags)}}function ft(n,c){if(n&1&&(i(0,"div",13),u(1,"ion-icon",14),i(2,"div")(3,"small"),s(4,"Atualizado em"),a(),i(5,"p"),s(6),a()()()),n&2){let t=f(2);r(6),d(t.formatDateTime(t.task.dataAtualizacao))}}function _t(n,c){if(n&1){let t=b();i(0,"div",5)(1,"div",6)(2,"ion-chip",7)(3,"ion-label"),s(4),a()()(),i(5,"ion-card",8)(6,"ion-card-header")(7,"ion-card-title"),s(8),a()(),i(9,"ion-card-content"),_(10,mt,5,1,"div",9),i(11,"div",10)(12,"h3"),s(13,"Prioridade"),a(),i(14,"ion-chip",11)(15,"ion-label"),s(16),a()()(),_(17,pt,6,1,"div",9)(18,ut,6,1,"div",9),i(19,"div",12)(20,"div",13),u(21,"ion-icon",14),i(22,"div")(23,"small"),s(24,"Criado em"),a(),i(25,"p"),s(26),a()()(),_(27,ft,7,1,"div",15),a()()(),i(28,"div",16)(29,"ion-button",17),C("click",function(){k(t);let o=f();return v(o.editTask())}),u(30,"ion-icon",18),s(31," Editar "),a(),i(32,"ion-button",19),C("click",function(){k(t);let o=f();return v(o.deleteTask())}),u(33,"ion-icon",20),s(34," Excluir "),a()()()}if(n&2){let t=f();r(2),l("color",t.getStatusColor(t.task.status)),r(2),d(t.getStatusLabel(t.task.status)),r(4),d(t.task.titulo),r(2),l("ngIf",t.task.descricao),r(4),l("color",t.getPriorityColor(t.task.prioridade)),r(2),d(t.getPriorityLabel(t.task.prioridade)),r(),l("ngIf",t.task.dataVencimento),r(),l("ngIf",t.task.tags&&t.task.tags.length>0),r(8),d(t.formatDateTime(t.task.dataCriacao)),r(),l("ngIf",t.task.dataAtualizacao)}}function xt(n,c){n&1&&(i(0,"div",27)(1,"ion-label"),s(2,"Carregando..."),a()())}var Dt,ht=at(()=>{E();w();K();ct();lt();st();ot();rt();w();dt();K();E();Dt=(()=>{let c=class c{constructor(e,o,g,nt){this.route=e,this.router=o,this.taskService=g,this.alertController=nt,this.task=null,this.isLoading=!0,this.taskId=null,J({create:Y,trash:et,calendar:Q,time:tt,pricetag:Z,chevronBack:X})}ngOnInit(){return x(this,null,function*(){this.taskId=this.route.snapshot.paramMap.get("id"),this.taskId&&(yield this.loadTask(this.taskId)),this.taskSubscription=this.taskService.tasks$.subscribe(e=>{if(this.taskId){let o=e.find(g=>g.id===this.taskId);o&&(this.task=o)}}),this.routerSubscription=this.router.events.pipe(P(e=>e instanceof S)).subscribe(()=>{this.taskId&&this.router.url.includes(`/task-detail/${this.taskId}`)&&this.loadTask(this.taskId)})})}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe(),this.taskSubscription&&this.taskSubscription.unsubscribe()}loadTask(e){return x(this,null,function*(){try{this.task=yield this.taskService.getTask(e),this.task||(console.error("Task not found:",e),this.router.navigate(["/tasks"]))}catch(o){console.error("Error loading task:",o),this.router.navigate(["/tasks"])}finally{this.isLoading=!1}})}editTask(){this.task&&this.router.navigate(["/task-form",this.task.id])}deleteTask(){return x(this,null,function*(){if(!this.task)return;yield(yield this.alertController.create({header:"Confirmar exclus\xE3o",message:"Tem certeza que deseja excluir esta tarefa?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Excluir",role:"destructive",handler:()=>x(this,null,function*(){if(this.task)try{yield this.taskService.deleteTask(this.task.id),yield this.router.navigate(["/tabs/tasks"])}catch(o){console.error("Error deleting task:",o),yield(yield this.alertController.create({header:"Erro",message:"Erro ao excluir tarefa: "+o?.message,buttons:["OK"]})).present()}})}]})).present()})}getPriorityColor(e){return{[p.LOW]:"success",[p.MEDIUM]:"warning",[p.HIGH]:"danger",[p.URGENT]:"danger"}[e]}getPriorityLabel(e){return{[p.LOW]:"Baixa",[p.MEDIUM]:"M\xE9dia",[p.HIGH]:"Alta",[p.URGENT]:"Urgente"}[e]}getStatusLabel(e){return{[m.TODO]:"A Fazer",[m.IN_PROGRESS]:"Em Andamento",[m.COMPLETED]:"Conclu\xEDdo",[m.CANCELLED]:"Cancelado"}[e]}getStatusColor(e){return{[m.TODO]:"medium",[m.IN_PROGRESS]:"primary",[m.COMPLETED]:"success",[m.CANCELLED]:"danger"}[e]}formatDate(e){return new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"})}formatDateTime(e){return new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}};c.\u0275fac=function(o){return new(o||c)(h(y),h(D),h(it),h(W))},c.\u0275cmp=I({type:c,selectors:[["app-task-detail"]],decls:9,vars:3,consts:[["slot","start"],["defaultHref","/tasks"],[3,"fullscreen"],["class","task-detail-container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"task-detail-container"],[1,"status-header"],[1,"status-chip",3,"color"],[1,"main-card"],["class","detail-section",4,"ngIf"],[1,"detail-section"],[3,"color"],[1,"detail-section","metadata"],[1,"metadata-item"],["name","time"],["class","metadata-item",4,"ngIf"],[1,"action-buttons"],["expand","block","color","primary",3,"click"],["slot","start","name","create"],["expand","block","color","danger","fill","outline",3,"click"],["slot","start","name","trash"],[1,"description-text"],["name","calendar"],["name","pricetag"],[1,"tags-container"],["color","tertiary",4,"ngFor","ngForOf"],["color","tertiary"],[1,"loading-container"]],template:function(o,g){o&1&&(i(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),u(3,"ion-back-button",1),a(),i(4,"ion-title"),s(5,"Detalhes da Tarefa"),a()()(),i(6,"ion-content",2),_(7,_t,35,10,"div",3)(8,xt,3,0,"div",4),a()),o&2&&(r(6),l("fullscreen",!0),r(),l("ngIf",g.task&&!g.isLoading),r(),l("ngIf",g.isLoading))},dependencies:[T,O,M,F,$,U,H,A,L,R,B,V,N,G,j,q,z],styles:[".task-detail-container[_ngcontent-%COMP%]{padding:16px;max-width:800px;margin:0 auto}.status-header[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:16px}.status-header[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;padding:8px 16px}.main-card[_ngcontent-%COMP%]{margin:0 0 16px}.main-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--ion-color-dark)}.detail-section[_ngcontent-%COMP%]{margin-bottom:24px}.detail-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--ion-color-medium);text-transform:uppercase;margin:0 0 8px;display:flex;align-items:center;gap:8px}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}.detail-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:var(--ion-color-dark)}.detail-section[_ngcontent-%COMP%]   .description-text[_ngcontent-%COMP%]{line-height:1.6;white-space:pre-wrap}.tags-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.metadata[_ngcontent-%COMP%]{padding-top:16px;border-top:1px solid var(--ion-color-light)}.metadata[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;margin-bottom:16px}.metadata[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.metadata[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--ion-color-medium);margin-top:2px}.metadata[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--ion-color-medium);text-transform:uppercase;font-weight:600;margin-bottom:4px}.metadata[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-dark)}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:0 0 32px}.action-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0;font-weight:600}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;padding:32px}"]});let n=c;return n})()});ht();export{Dt as TaskDetailPage};
